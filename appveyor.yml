version: 1.0.0.{build}

environment:
  CMAKE_PREFIX_PATH: "C:\\Qt\\5.5\\msvc2013_64"

platform: x64
configuration: Release

build:
  project: rts.sln

install:
  - git config --global url."https://github.com/".insteadOf "git@github.com:"
  - git submodule update --init --recursive
  - nuget install log4cxx
  - ps: Start-FileDownload 'http://mirror.vorboss.net/apache/apr/apr-1.5.2-win32-src.zip'
  - ps: Start-FileDownload 'http://mirror.vorboss.net/apache/apr/apr-util-1.5.4-win32-src.zip'
  - unzip apr-1.5.2-win32-src.zip
  - rename apr-1.5.2 apr
  - unzip apr-util-1.5.4-win32-src.zip
  - rename apr-util-1.5.4-win32-src apr-util
  - cd apache-log4cxx-0.10.0
  - configure
  - configure-aprutil

before_build:
  - echo Running cmake...
  - cmake -G "Visual Studio 12 Win64" -D Log4Cxx_LIBRARY="C:\projects\rts\log4cxx.0.10.0\lib" -D Log4Cxx_INCLUDE_DIR="C:\projects\rts\thirdparty\log4cxx\src\main\include" .
